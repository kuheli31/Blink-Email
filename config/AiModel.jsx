const {
    GoogleGenerativeAI,
    HarmCategory,
    HarmBlockThreshold,
  } = require("@google/generative-ai");
  const fs = require("node:fs");
  const mime = require("mime-types");
  
  const apiKey = process.env.NEXT_PUBLIC_GEMINI_API_KEY;
  const genAI = new GoogleGenerativeAI(apiKey);
  
  const model = genAI.getGenerativeModel({
    model: "gemini-2.5-pro-exp-03-25",
  });
  
  const generationConfig = {
    temperature: 1,
    topP: 0.95,
    topK: 64,
    maxOutputTokens: 65536,
    responseModalities: [
    ],
    responseMimeType: "application/json",
  };
  
 
    export const GenerateEmailTemplateAIModel = model.startChat({
      generationConfig,
      history: [
        //{
        //  role: "user",
        //  parts: [
          //  {text: "Your are Pro Email template builder AI Assitance\n- You can generate Email template based on following scehma \n- Schema example: [{\"0\":{\"icon\":{},\"type\":\"LogoHeader\",\"label\":\"Logo Header\",\"imageUrl\":\"/logo.svg\",\"alt\":\"Game Logo\",\"url\":\"#\",\"style\":{\"backgroundColor\":\"#ffffff\",\"padding\":[\"10px\"],\"height\":\"auto\",\"width\":[\"20%\"]},\"outerStyle\":{\"display\":\"flex\",\"justifyContent\":[\"center\"],\"alignItems\":\"center\",\"backgroundColor\":\"#fff\",\"width\":\"100%\"},\"id\":1737391139265},\"label\":\"Column\",\"type\":\"column\",\"numOfCol\":1,\"icon\":{},\"id\":1737391129199},{\"0\":{\"icon\":{},\"type\":\"Image\",\"label\":\"Image\",\"imageUrl\":\"/image.png\",\"alt\":\"Game Screenshot\",\"url\":\"#\",\"style\":{\"backgroundColor\":\"#ffffff\",\"padding\":\"10px\",\"height\":\"auto\",\"width\":[\"100%\"],\"margin\":\"0px\",\"borderRadius\":\"5px\"},\"outerStyle\":{\"display\":\"flex\",\"width\":\"100%\",\"justifyContent\":\"center\",\"alignItems\":\"center\",\"backgroundColor\":\"#fff\"},\"id\":1737391168265},\"label\":\"Column\",\"type\":\"column\",\"numOfCol\":1,\"icon\":{},\"id\":1737390120654},{\"0\":{\"icon\":{},\"type\":\"Text\",\"label\":\"Text\",\"textarea\":\"Experience the thrill of high-speed racing with our brand new game! Featuring stunning graphics, realistic physics, and a wide range of customizable cars, it's time to hit the track and show off your skills. Download now and start your racing journey!\",\"style\":{\"backgroundColor\":\"#fff\",\"color\":\"#666666\",\"padding\":\"10px\",\"textAlign\":\"center\",\"fontSize\":[\"16px\"],\"fontWeight\":\"normal\",\"textTransform\":[\"capitalize\"]},\"id\":1737391200299},\"label\":\"Column\",\"type\":\"column\",\"numOfCol\":1,\"icon\":{},\"id\":1737390127325},{\"0\":{\"icon\":{},\"label\":\"Button\",\"type\":\"Button\",\"content\":\"Download Now\",\"url\":\"#\",\"style\":{\"textAlign\":\"center\",\"backgroundColor\":[\"#007bff\"],\"color\":\"#ffffff\",\"padding\":\"10px 20px\",\"width\":\"auto\",\"fontSize\":\"18px\",\"borderRadius\":\"5px\",\"fontWeight\":\"bold\",\"objectFit\":\"contain\"},\"outerStyle\":{\"display\":\"flex\",\"justifyContent\":\"center\",\"alignItems\":\"center\",\"width\":\"100%\"},\"id\":1737391224649},\"label\":\"Column\",\"type\":\"column\",\"numOfCol\":1,\"icon\":{},\"id\":1737391222432},{\"0\":{\"icon\":{},\"type\":\"Image\",\"label\":\"Image\",\"imageUrl\":\"/image.png\",\"alt\":\"Image\",\"url\":\"#\",\"style\":{\"backgroundColor\":\"#ffffff\",\"padding\":\"10px\",\"height\":\"50%\",\"width\":[\"57%\"],\"margin\":\"0px\",\"borderRadius\":[\"27px\"]},\"outerStyle\":{\"display\":\"flex\",\"width\":\"100%\",\"justifyContent\":\"center\",\"alignItems\":\"center\",\"backgroundColor\":\"#fff\"},\"id\":1737498314120},\"1\":{\"icon\":{},\"type\":\"Text\",\"label\":\"Text\",\"textarea\":\"Experience the thrill of high-speed racing with our brand new game! Featuring stunning graphics, realistic physics, and a wide range of customizable cars, it's time to hit the track and show off your skills. Download now and start your racing journey!\",\"style\":{\"backgroundColor\":\"#fff\",\"color\":\"#000000\",\"padding\":\"10px\",\"textAlign\":[\"left\"],\"fontSize\":[\"13px\"],\"fontWeight\":\"normal\",\"textTransform\":[\"capitalize\"]},\"id\":1737498315970},\"label\":\"2 Column\",\"type\":\"column\",\"numOfCol\":2,\"icon\":{},\"id\":1737498304253}]\n- Another Example : [{\"0\":{\"icon\":{},\"type\":\"LogoHeader\",\"label\":\"Logo Header\",\"imageUrl\":\"/logo.svg\",\"alt\":\"Tubeguruji Logo\",\"url\":\"#\",\"style\":{\"backgroundColor\":[\"#ffffff\"],\"padding\":[\"10px\"],\"height\":\"auto\",\"width\":[\"25%\"]},\"outerStyle\":{\"display\":\"flex\",\"justifyContent\":[\"center\"],\"alignItems\":\"center\",\"backgroundColor\":[\"#ffffff\"],\"width\":\"100%\"},\"id\":1737391139265},\"label\":\"Column\",\"type\":\"column\",\"numOfCol\":1,\"icon\":{},\"id\":1737391129199},{\"0\":{\"icon\":{},\"type\":\"Image\",\"label\":\"Image\",\"imageUrl\":\"/image.png\",\"alt\":\"App Store Icon\",\"url\":\"#\",\"style\":{\"backgroundColor\":\"#ffffff\",\"padding\":\"10px\",\"height\":[\"100%\"],\"width\":[\"100%\"],\"margin\":\"0px\",\"borderRadius\":[\"27px\"]},\"outerStyle\":{\"display\":\"flex\",\"width\":\"100%\",\"justifyContent\":\"center\",\"alignItems\":\"center\",\"backgroundColor\":\"#fff\"},\"id\":1737498314120},\"1\":{\"icon\":{},\"type\":\"Text\",\"label\":\"Text\",\"textarea\":\"ðŸ“± Get instant access to all Tubeguruji content, tutorials, and community updates! Download the Tubeguruji app today and elevate your YouTube game. Stay connected with us anytime, anywhere! ðŸ”¥\",\"style\":{\"backgroundColor\":\"#fff\",\"color\":\"#000000\",\"padding\":\"10px\",\"textAlign\":[\"left\"],\"fontSize\":[\"13px\"],\"fontWeight\":\"normal\",\"textTransform\":[\"capitalize\"]},\"id\":1737498315970},\"label\":\"2 Column\",\"type\":\"column\",\"numOfCol\":2,\"icon\":{},\"id\":1737498304253},{\"0\":{\"icon\":{},\"type\":\"Text\",\"label\":\"Text\",\"textarea\":\"ðŸ“± Get instant access to all Tubeguruji content, tutorials, and community updates! Download the Tubeguruji app today and elevate your YouTube game. Stay connected with us anytime, anywhere! ðŸ”¥\",\"style\":{\"backgroundColor\":[\"#ffffff\"],\"color\":\"#000000\",\"padding\":\"10px\",\"textAlign\":[\"left\"],\"fontSize\":[\"13px\"],\"fontWeight\":\"normal\",\"textTransform\":[\"capitalize\"]},\"outerStyle\":{\"backgroundColor\":[\"#d11f1f\"],\"width\":\"100%\"},\"id\":1737499072555},\"1\":{\"icon\":{},\"type\":\"Image\",\"label\":\"Image\",\"imageUrl\":\"/image.png\",\"alt\":\"Image\",\"url\":\"#\",\"style\":{\"backgroundColor\":\"#ffffff\",\"padding\":\"10px\",\"height\":\"50%\",\"width\":[\"100%\"],\"margin\":\"0px\",\"borderRadius\":\"0px\"},\"outerStyle\":{\"display\":\"flex\",\"width\":\"100%\",\"justifyContent\":\"center\",\"alignItems\":\"center\",\"backgroundColor\":\"#fff\"},\"id\":1737498958056},\"label\":\"2 Column\",\"type\":\"column\",\"numOfCol\":2,\"icon\":{},\"id\":1737498950655},{\"0\":{\"icon\":{},\"type\":\"Image\",\"label\":\"Image\",\"imageUrl\":\"/image.png\",\"alt\":\"Image\",\"url\":\"#\",\"style\":{\"backgroundColor\":\"#ffffff\",\"padding\":\"10px\",\"height\":\"50%\",\"width\":[\"100%\"],\"margin\":\"0px\",\"borderRadius\":\"0px\"},\"outerStyle\":{\"display\":\"flex\",\"width\":\"100%\",\"justifyContent\":\"center\",\"alignItems\":\"center\",\"backgroundColor\":\"#fff\"},\"id\":1737499155105},\"1\":{\"icon\":{},\"type\":\"Text\",\"label\":\"Text\",\"textarea\":\"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse \",\"style\":{\"backgroundColor\":\"#fff\",\"color\":\"#000000\",\"padding\":\"10px\",\"textAlign\":[\"left\"],\"fontSize\":[\"13px\"],\"fontWeight\":\"normal\",\"textTransform\":[\"capitalize\"]},\"outerStyle\":{\"backgroundColor\":\"#fff\",\"width\":\"100%\"},\"id\":1737499165388},\"label\":\"2 Column\",\"type\":\"column\",\"numOfCol\":2,\"icon\":{},\"id\":1737499150418}]\n- Add More column, content with type Images, Button, Text, Logo, LogoHeader and other option if needed\n- Use appropriate type when needed, Do not Exactly copy schema as it is , Make changes depends on Email template topic\n- Write Meaning full text content with Emoji icons if needed\n- For logo add image as '/logo.svg' and for image placeholder add '/image.png'\n- Give response in JSON format only (Return schema only)\n-Generate the Email Template for email marketers , youtubers , social marketing , business , A/B testing marketing agencies , advertisements, company's values for website applications\n   "},
        //  ],
        //},
        //{
          //role: "model",
          //parts: [
            //{text: "The user wants an email template schema in JSON format.\nThis schema should be suitable for various marketing purposes like email marketers, YouTubers, social media marketing, business promotions, A/B testing, advertisements, and showcasing company values for web applications.\n\nI need to create a JSON structure based on the provided examples.\nThe template should be versatile and include components like:\n1.  **Logo Header**: For branding.\n2.  **Headline/Intro Text**: Engaging opening.\n3.  **Image/Video Thumbnail**: Visual appeal (using `/image.png` or maybe a placeholder text suggesting video).\n4.  **Body Text**: Detailed information, value proposition.\n5.  **Call to Action (CTA) Button**: Encourage user action.\n6.  **Multi-column layouts**: For presenting information side-by-side (e.g., features, testimonials, social links).\n7.  **Social Media Links/Footer**: Standard email footer elements.\n\nLet's break down the structure for a general marketing template:\n\n1.  **Logo Header**: Centered logo.\n2.  **Main Image**: A prominent image related to the campaign/content.\n3.  **Headline Text**: Bold, centered text introducing the main topic.\n4.  **Body Text**: Explaining the offer, content, or value proposition. Use emojis.\n5.  **CTA Button**: Clear call to action.\n6.  **2-Column Section**:\n    *   Column 1: Image (e.g., feature icon, testimonial photo)\n    *   Column 2: Text (e.g., feature description, testimonial quote)\n7.  **Another 2-Column Section (or 3-column for social links)**:\n    *   Could showcase more features, benefits, or social proof.\n    *   Alternatively, use this for social media icons/links.\n8.  **Footer Text**: Unsubscribe link, company address, etc. (Maybe represent this as a simple Text block for now).\n\nConstraint Checklist & Confidence Score:\n1. Generate Email template based on schema: Yes\n2. Schema example followed: Yes (structure is similar)\n3. More columns/content added: Yes\n4. Appropriate types used: Yes (LogoHeader, Image, Text, Button, column)\n5. Meaningful text with emojis: Yes\n6. Logo as '/logo.svg': Yes\n7. Image placeholder as '/image.png': Yes\n8. JSON format only: Yes\n9. Target Audience considered (Marketers, YouTubers, etc.): Yes (template is generic enough)\n\nConfidence Score: 5/5\n\nMental Sandbox:\n*   Could I use a 3-column layout for features instead of 2-column? Yes, but 2-column is common and simpler to start with.\n*   Should I add specific sections for YouTubers (like video thumbnails)? The generic image block can serve this purpose; the text can prompt users to watch a video.\n*   How to represent social links? Could use multiple small image blocks in a row within a column, or a multi-column layout with image + text per column. Let's try a 3-column layout with small images (placeholders) for social icons.\n*   A/B testing aspect: The template structure allows easy modification of elements like headlines, images, text, and CTAs for A/B testing.\n*   Company values: A text block or a two-column block (icon + text) could be used to highlight values.\n\nRefinement:\n*   Start with Logo.\n*   Add a compelling headline (Text).\n*   Add a main visual (Image).\n*   Add introductory text explaining the core message (Text).\n*   Add a clear CTA (Button).\n*   Include a 2-column section for benefits/features (Image + Text).\n*   Include another 2-column section (Text + Image) for variety or social proof.\n*   Add a section for social media links (maybe 3-column with small images).\n*   Add footer text (Text).\n\nOkay, planning complete. I will now generate the JSON based on this refined plan."},
            //{text: "```json\n[\n  {\n    \"0\": {\n      \"icon\": {},\n      \"type\": \"LogoHeader\",\n      \"label\": \"Logo Header\",\n      \"imageUrl\": \"/logo.svg\",\n      \"alt\": \"Company Logo\",\n      \"url\": \"#\",\n      \"style\": {\n        \"backgroundColor\": \"#ffffff\",\n        \"padding\": [\"15px\"],\n        \"height\": \"auto\",\n        \"width\": [\"30%\"]\n      },\n      \"outerStyle\": {\n        \"display\": \"flex\",\n        \"justifyContent\": [\"center\"],\n        \"alignItems\": \"center\",\n        \"backgroundColor\": \"#f8f9fa\",\n        \"width\": \"100%\"\n      },\n      \"id\": 1738100000001\n    },\n    \"label\": \"Column\",\n    \"type\": \"column\",\n    \"numOfCol\": 1,\n    \"icon\": {},\n    \"id\": 1738100000000\n  },\n  {\n    \"0\": {\n      \"icon\": {},\n      \"type\": \"Text\",\n      \"label\": \"Headline Text\",\n      \"textarea\": \"ðŸš€ Supercharge Your Marketing Efforts Today!\",\n      \"style\": {\n        \"backgroundColor\": \"#ffffff\",\n        \"color\": \"#333333\",\n        \"padding\": [\"20px\", \"10px\", \"10px\", \"10px\"],\n        \"textAlign\": \"center\",\n        \"fontSize\": [\"24px\"],\n        \"fontWeight\": \"bold\",\n        \"textTransform\": [\"none\"]\n      },\n      \"outerStyle\": {\n          \"backgroundColor\": \"#ffffff\",\n          \"width\": \"100%\"\n      },\n      \"id\": 1738100000003\n    },\n    \"label\": \"Column\",\n    \"type\": \"column\",\n    \"numOfCol\": 1,\n    \"icon\": {},\n    \"id\": 1738100000002\n  },\n    {\n    \"0\": {\n      \"icon\": {},\n      \"type\": \"Image\",\n      \"label\": \"Main Banner Image\",\n      \"imageUrl\": \"/image.png\",\n      \"alt\": \"Marketing Campaign Visual\",\n      \"url\": \"#\",\n      \"style\": {\n        \"backgroundColor\": \"#ffffff\",\n        \"padding\": \"0px\",\n        \"height\": \"auto\",\n        \"width\": [\"100%\"],\n        \"margin\": \"0px\",\n        \"borderRadius\":\"0px\"\n      },\n      \"outerStyle\": {\n        \"display\": \"flex\",\n        \"width\": \"100%\",\n        \"justifyContent\": \"center\",\n        \"alignItems\": \"center\",\n        \"backgroundColor\": \"#ffffff\"\n      },\n      \"id\": 1738100000005\n    },\n    \"label\": \"Column\",\n    \"type\": \"column\",\n    \"numOfCol\": 1,\n    \"icon\": {},\n    \"id\": 1738100000004\n  },\n  {\n    \"0\": {\n      \"icon\": {},\n      \"type\": \"Text\",\n      \"label\": \"Body Text\",\n      \"textarea\": \"Hey [Name], ðŸ‘‹ Ready to boost your engagement, reach new audiences, and drive results? Whether you're a YouTuber, email marketer, or business owner, our latest strategies and tools are designed for YOU. Discover powerful insights, practical tips, and resources to elevate your brand. Let's achieve your goals together! âœ¨\",\n      \"style\": {\n        \"backgroundColor\": \"#ffffff\",\n        \"color\": \"#555555\",\n        \"padding\": [\"10px\", \"20px\", \"20px\", \"20px\"],\n        \"textAlign\": \"left\",\n        \"fontSize\": [\"16px\"],\n        \"fontWeight\": \"normal\",\n        \"lineHeight\": \"1.6\"\n      },\n       \"outerStyle\": {\n          \"backgroundColor\": \"#ffffff\",\n          \"width\": \"100%\"\n      },\n      \"id\": 1738100000007\n    },\n    \"label\": \"Column\",\n    \"type\": \"column\",\n    \"numOfCol\": 1,\n    \"icon\": {},\n    \"id\": 1738100000006\n  },\n  {\n    \"0\": {\n      \"icon\": {},\n      \"label\": \"CTA Button\",\n      \"type\": \"Button\",\n      \"content\": \"Learn More Now\",\n      \"url\": \"#\",\n      \"style\": {\n        \"textAlign\": \"center\",\n        \"backgroundColor\": [\"#007bff\"],\n        \"color\": \"#ffffff\",\n        \"padding\": \"12px 25px\",\n        \"width\": \"auto\",\n        \"fontSize\": \"18px\",\n        \"borderRadius\": \"5px\",\n        \"fontWeight\": \"bold\"\n      },\n      \"outerStyle\": {\n        \"display\": \"flex\",\n        \"justifyContent\": \"center\",\n        \"alignItems\": \"center\",\n        \"width\": \"100%\",\n        \"padding\": [\"10px\", \"0px\", \"20px\", \"0px\"],\n         \"backgroundColor\": \"#ffffff\"\n      },\n      \"id\": 1738100000009\n    },\n    \"label\": \"Column\",\n    \"type\": \"column\",\n    \"numOfCol\": 1,\n    \"icon\": {},\n    \"id\": 1738100000008\n  },\n  {\n    \"0\": {\n      \"icon\": {},\n      \"type\": \"Image\",\n      \"label\": \"Feature Image 1\",\n      \"imageUrl\": \"/image.png\",\n      \"alt\": \"Feature Icon 1\",\n      \"url\": \"#\",\n      \"style\": {\n        \"backgroundColor\": \"#f0f0f0\",\n        \"padding\": \"10px\",\n        \"height\": [\"100px\"],\n        \"width\": [\"100px\"],\n        \"margin\": \"auto\",\n        \"borderRadius\": [\"50%\"]\n      },\n      \"outerStyle\": {\n        \"display\": \"flex\",\n        \"width\": \"100%\",\n        \"justifyContent\": \"center\",\n        \"alignItems\": \"center\",\n        \"backgroundColor\": \"#f8f9fa\",\n        \"padding\": [\"10px\"]\n      },\n      \"id\": 1738100000011\n    },\n    \"1\": {\n      \"icon\": {},\n      \"type\": \"Text\",\n      \"label\": \"Feature Text 1\",\n      \"textarea\": \"ðŸ“Š **A/B Testing Made Easy:** Optimize your campaigns effortlessly. Test headlines, visuals, and CTAs to find what truly resonates with your audience and maximize conversion rates.\",\n      \"style\": {\n        \"backgroundColor\": \"#f8f9fa\",\n        \"color\": \"#333333\",\n        \"padding\": \"10px\",\n        \"textAlign\": [\"left\"],\n        \"fontSize\": [\"14px\"],\n        \"fontWeight\": \"normal\"\n      },\n       \"outerStyle\": {\n        \"backgroundColor\": \"#f8f9fa\",\n        \"width\": \"100%\",\n        \"padding\": [\"10px\"]\n      },\n      \"id\": 1738100000012\n    },\n    \"label\": \"2 Column Feature\",\n    \"type\": \"column\",\n    \"numOfCol\": 2,\n    \"icon\": {},\n    \"id\": 1738100000010\n  },\n  {\n    \"0\": {\n      \"icon\": {},\n      \"type\": \"Text\",\n      \"label\": \"Feature Text 2\",\n      \"textarea\": \"ðŸ“ˆ **Social Media Amplification:** Learn secrets to grow your reach on platforms like YouTube, Instagram, and TikTok. Engage your community and turn followers into loyal fans.\",\n      \"style\": {\n        \"backgroundColor\": \"#f8f9fa\",\n        \"color\": \"#333333\",\n        \"padding\": \"10px\",\n        \"textAlign\": [\"left\"],\n        \"fontSize\": [\"14px\"],\n        \"fontWeight\": \"normal\"\n      },\n      \"outerStyle\": {\n        \"backgroundColor\": \"#f8f9fa\",\n        \"width\": \"100%\",\n        \"padding\": [\"10px\"]\n      },\n      \"id\": 1738100000014\n    },\n    \"1\": {\n      \"icon\": {},\n      \"type\": \"Image\",\n      \"label\": \"Feature Image 2\",\n      \"imageUrl\": \"/image.png\",\n      \"alt\": \"Feature Icon 2\",\n      \"url\": \"#\",\n      \"style\": {\n        \"backgroundColor\": \"#f0f0f0\",\n        \"padding\": \"10px\",\n        \"height\": [\"100px\"],\n        \"width\": [\"100px\"],\n        \"margin\": \"auto\",\n        \"borderRadius\": [\"50%\"]\n      },\n      \"outerStyle\": {\n        \"display\": \"flex\",\n        \"width\": \"100%\",\n        \"justifyContent\": \"center\",\n        \"alignItems\": \"center\",\n        \"backgroundColor\": \"#f8f9fa\",\n        \"padding\": [\"10px\"]\n      },\n      \"id\": 1738100000015\n    },\n    \"label\": \"2 Column Feature Alt\",\n    \"type\": \"column\",\n    \"numOfCol\": 2,\n    \"icon\": {},\n    \"id\": 1738100000013\n  },\n  {\n    \"0\": {\n        \"icon\": {},\n        \"type\": \"Text\",\n        \"label\": \"Social Prompt Text\",\n        \"textarea\": \"Connect With Us:\",\n        \"style\": {\n            \"backgroundColor\": \"#ffffff\",\n            \"color\": \"#444444\",\n            \"padding\": [\"20px\", \"10px\", \"5px\", \"10px\"],\n            \"textAlign\": \"center\",\n            \"fontSize\": [\"16px\"],\n            \"fontWeight\": \"bold\"\n        },\n        \"outerStyle\": {\n            \"backgroundColor\": \"#ffffff\",\n            \"width\": \"100%\"\n        },\n        \"id\": 1738100000017\n    },\n    \"label\": \"Column\",\n    \"type\": \"column\",\n    \"numOfCol\": 1,\n    \"icon\": {},\n    \"id\": 1738100000016\n  },\n  {\n    \"0\": {\n      \"icon\": {},\n      \"type\": \"Image\",\n      \"label\": \"Social Icon 1\",\n      \"imageUrl\": \"/image.png\",\n      \"alt\": \"Facebook\",\n      \"url\": \"#\",\n      \"style\": {\n        \"padding\": \"5px\",\n        \"height\": [\"32px\"],\n        \"width\": [\"32px\"]\n      },\n      \"outerStyle\": {\n        \"display\": \"flex\",\n        \"width\": \"33.33%\",\n        \"justifyContent\": \"center\",\n        \"alignItems\": \"center\",\n        \"backgroundColor\": \"#ffffff\"\n      },\n      \"id\": 1738100000019\n    },\n    \"1\": {\n       \"icon\": {},\n      \"type\": \"Image\",\n      \"label\": \"Social Icon 2\",\n      \"imageUrl\": \"/image.png\",\n      \"alt\": \"Twitter\",\n      \"url\": \"#\",\n      \"style\": {\n        \"padding\": \"5px\",\n        \"height\": [\"32px\"],\n        \"width\": [\"32px\"]\n      },\n      \"outerStyle\": {\n        \"display\": \"flex\",\n        \"width\": \"33.33%\",\n        \"justifyContent\": \"center\",\n        \"alignItems\": \"center\",\n         \"backgroundColor\": \"#ffffff\"\n      },\n      \"id\": 1738100000020\n    },\n     \"2\": {\n       \"icon\": {},\n      \"type\": \"Image\",\n      \"label\": \"Social Icon 3\",\n      \"imageUrl\": \"/image.png\",\n      \"alt\": \"YouTube\",\n      \"url\": \"#\",\n      \"style\": {\n        \"padding\": \"5px\",\n        \"height\": [\"32px\"],\n        \"width\": [\"32px\"]\n      },\n      \"outerStyle\": {\n        \"display\": \"flex\",\n        \"width\": \"33.33%\",\n        \"justifyContent\": \"center\",\n        \"alignItems\": \"center\",\n         \"backgroundColor\": \"#ffffff\"\n      },\n      \"id\": 1738100000021\n    },\n    \"label\": \"3 Column Social\",\n    \"type\": \"column\",\n    \"numOfCol\": 3,\n    \"icon\": {},\n    \"id\": 1738100000018\n  },\n   {\n    \"0\": {\n      \"icon\": {},\n      \"type\": \"Text\",\n      \"label\": \"Footer Text\",\n      \"textarea\": \"Â© 2024 [Your Company Name]. All rights reserved.\\nOur mailing address is: [Your Address]\\nWant to change how you receive these emails?\\nYou can update your preferences or unsubscribe from this list.\",\n      \"style\": {\n        \"backgroundColor\": \"#f0f0f0\",\n        \"color\": \"#777777\",\n        \"padding\": [\"20px\"],\n        \"textAlign\": \"center\",\n        \"fontSize\": [\"12px\"],\n        \"fontWeight\": \"normal\",\n        \"lineHeight\": \"1.5\"\n      },\n      \"outerStyle\": {\n         \"backgroundColor\": \"#f0f0f0\",\n         \"width\": \"100%\"\n      },\n      \"id\": 1738100000023\n    },\n    \"label\": \"Column\",\n    \"type\": \"column\",\n    \"numOfCol\": 1,\n    \"icon\": {},\n    \"id\": 1738100000022\n  }\n]\n```"},
          //],
        //},
      ],
    });
  
    const result = await GenerateEmailTemplateAIModel.sendMessage("INSERT_INPUT_HERE");
    // TODO: Following code needs to be updated for client-side apps.
    const candidates = result.response.candidates;
    for(let candidate_index = 0; candidate_index < candidates.length; candidate_index++) {
      for(let part_index = 0; part_index < candidates[candidate_index].content.parts.length; part_index++) {
        const part = candidates[candidate_index].content.parts[part_index];
        if(part.inlineData) {
          try {
            const filename = `output_${candidate_index}_${part_index}.${mime.extension(part.inlineData.mimeType)}`;
            fs.writeFileSync(filename, Buffer.from(part.inlineData.data, 'base64'));
            console.log(`Output written to: ${filename}`);
          } catch (err) {
            console.error(err);
          }
        }
      }
}
    